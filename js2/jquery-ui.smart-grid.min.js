$.widget("lodestar.smartgrid",{options:{row_count:0,row_selector:".row",children_rows:[]},_create:function(){this.element.addClass("smart-grid")},_setOption:function(t,e){this._super(t,e)},_setOptions:function(t){this._super(t)},pushRow:function(t,e){this.options.children_rows.push(t),rows+=1,this._triggerRowChange()},_triggerRowChange:function(){},removeRow:function(t){this.options.children_rows=this.options.children_rows.splice(t,1),rows-=1,this._triggerRowChange()},_init:function(){this.element.find("> "+this.settings.row_selector).each(function(t,e){var i=new _smartGrodRow($(e)),s={data:$(e).data()};this.pushRow(i,s)})},_destroy:function(){this.element.removeClass("smart-grid")},_smartGridRow:function(t){var e=t,i=[],s={row_number:0,children_cell_selector:"[class^=col-]",cell_count:0,data:{}},n=function(t){this.settings=$.extend({},s,t)},r=function(t,e){var s=new _smartGridCell(t);s.init(e),i.push(s),cell_count+=1};this.settings={},this.init=function(t,i){e.addClass(".smart-grid-row"),n(t);var s={};return i=$.extend({},s,t),$(e).find("> "+this.settings.children_cell_selector).each(function(t,e){r($(e),i)}),this},this.rowUpdate=function(){$.each(i,function(t,e){e.calcCell()})}},_smartGridCell:function(t){var e=t,i={cell_number:0,display_value:"0",value:"0",type:"string",cell_data_value_selector:"baseText"},s=function(t){!t.value&&e.data()[cell_data_value_selector]&&(t.value=e.data()[cell_data_value_selector]),this.settings=$.extend({},i,t)},n=function(){return""};this.settings={},this.calcCell=function(){"formula"===this.settings.type&&(this.settings.display_value=n())},this.init=function(t){return s(t),this}}});